<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF=8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Healthy HaBits</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="assets\bootstrap-4.5.0-dist\css\bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/styles.css" />
</head>

<body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <!-- Preloader -->
    <div class="preloader">
        <div class="loader"></div>
    </div>

    <!-- Main Body -->
    <div class="main-container">
        <!-- Aside -->
        <div class="aside">
            <!-- Nav Toggle-->
            <div class="nav-toggle">
                <span></span>
            </div>

            <div class="aside-inner">
                <!-- Logo -->
                <div class="logo">
                    <a href="#">Healthy HaBits</a>
                </div>

                <!-- Nav -->
                <ul class="nav">
                    <li>
                        <a href="#schedule" class="active"><i class="fa fa-calendar"></i> Schedule</a>
                    </li>
                    <li>
                        <a href="#statistics" class=""><i class="fa fa-signal"></i> Statistics</a>
                    </li>
                    <li>
                        <a href="#preferences" class=""><i class="fa fa-user"></i> Preferences</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="main-content">

            <!-- Schedule Section -->
            <section class="home section active" id="schedule">
                <div class="container">
                    <div class="logoCon">
                        <img src="assets/img/logo.png" width="100" height="100" alt="logo">
                    </div>
                    <div class="row">
                        <div class="section-title padd-15">
                            <h2>Schedule <i class="fa fa-calendar"></i></h2>
                        </div>
                    </div>

                    <!-- Google Calander API -->

                    <html>
                    <button id="authorize_button" class="btn padd-15">
                        Authorize
                    </button>
                    <button id="signout_button" class="btn padd-15">Sign Out</button>

                    <pre id="content" style="white-space: pre-wrap"></pre>

                    <script src="https://apis.google.com/js/platform.js" async defer></script>

                    <script type="text/javascript">
                        // Client ID and API key from the Developer Console
                        var CLIENT_ID =
                            "1079416677730-fi6bkri729d1s6iv9ka6r8cap770jnka.apps.googleusercontent.com";
                        var API_KEY = "AIzaSyBiJGyS83sa8ONJei9JlJWvsjy21oWByqY";

                        // Array of API discovery doc URLs for APIs used by the quickstart
                        var DISCOVERY_DOCS = [
                            "https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest",
                        ];

                        // Authorization scopes required by the API; multiple scopes can be
                        // included, separated by spaces.
                        var SCOPES = "https://www.googleapis.com/auth/calendar";

                        var authorizeButton = document.getElementById(
                            "authorize_button"
                        );
                        var signoutButton = document.getElementById("signout_button");

                        /**
                         *  On load, called to load the auth2 library and API client library.
                         */
                        function handleClientLoad() {
                            gapi.load("client:auth2", initClient);
                        }

                        /**
                         *  Initializes the API client library and sets up sign-in state
                         *  listeners.
                         */
                        function initClient() {
                            gapi.client
                                .init({
                                    apiKey: API_KEY,
                                    clientId: CLIENT_ID,
                                    discoveryDocs: DISCOVERY_DOCS,
                                    scope: SCOPES,
                                })
                                .then(
                                    function () {
                                        // Listen for sign-in state changes.
                                        gapi.auth2
                                            .getAuthInstance()
                                            .isSignedIn.listen(updateSigninStatus);

                                        // Handle the initial sign-in state.
                                        updateSigninStatus(
                                            gapi.auth2.getAuthInstance().isSignedIn.get()
                                        );
                                        authorizeButton.onclick = handleAuthClick;
                                        signoutButton.onclick = handleSignoutClick;
                                    },
                                    function (error) {
                                        appendPre(JSON.stringify(error, null, 2));
                                    }
                                );
                        }

                        /**
                         *  Called when the signed in status changes, to update the UI
                         *  appropriately. After a sign-in, the API is called.
                         */
                        function updateSigninStatus(isSignedIn) {
                            if (isSignedIn) {
                                authorizeButton.style.display = "none";
                                signoutButton.style.display = "block";
                                listUpcomingEvents();
                            } else {
                                authorizeButton.style.display = "block";
                                signoutButton.style.display = "none";
                            }
                        }

                        /**
                         *  Sign in the user upon button click.
                         */
                        function handleAuthClick(event) {
                            console.log("handleAuthCalled");
                            gapi.auth2.getAuthInstance().signIn();
                        }

                        /**
                         *  Sign out the user upon button click.
                         */
                        function handleSignoutClick(event) {
                            gapi.auth2.getAuthInstance().signOut();
                        }

                        /**
                         * Append a pre element to the body containing the given message
                         * as its text node. Used to display the results of the API call.
                         *
                         * @param {string} message Text to be placed in pre element.
                         */
                        function appendPre(message) {
                            var pre = document.getElementById("content");
                            var textContent = document.createTextNode(message + "\n");
                            pre.appendChild(textContent);
                        }

                        /**
                         * Print the summary and start datetime/date of the next ten events in
                         * the authorized user's calendar. If no events are found an
                         * appropriate message is printed.
                         */


                        function listUpcomingEvents() {

                            var event1 = {
                                summary: "did we make it",
                                location: "800 Howard St., San Francisco, CA 94103",
                                description: "Jeffery Just graduated fresh off campus.",
                                start: {
                                    dateTime: "2020-10-6T09:00:00-07:00",
                                    timeZone: "America/Los_Angeles",
                                },
                                end: {
                                    dateTime: "2020-10-6T17:00:00-07:00",
                                    timeZone: "America/Los_Angeles",
                                },
                                recurrence: ["RRULE:FREQ=DAILY;COUNT=2"],
                                attendees: [{
                                        email: "lpage@example.com"
                                    },
                                    {
                                        email: "sbrin@example.com"
                                    },
                                ],
                                reminders: {
                                    useDefault: false,
                                    overrides: [{
                                            method: "email",
                                            minutes: 24 * 60
                                        },
                                        {
                                            method: "popup",
                                            minutes: 10
                                        },
                                    ],
                                },
                                //htmlLink : 'https://calendar.google.com/calendar/embed?src=c_lh6s4ugatmp8q7eop3n94rhnsk%40group.calendar.google.com&ctz=America%2FToronto',
                            };

                            gapi.client.calendar.events
                                .insert({
                                    calendarId: "c_lh6s4ugatmp8q7eop3n94rhnsk@group.calendar.google.com",
                                    resource: event1,
                                }).then(function () {
                                    appendPre("Event created: " + event1.summary)
                                });

                            //   request.execute(function (event) {
                            //     appendPre("Event created: " + event.data.htmlLink);
                            //   });

                            gapi.client.calendar.events
                                .list({
                                    calendarId: "c_lh6s4ugatmp8q7eop3n94rhnsk@group.calendar.google.com",
                                    timeMin: new Date().toISOString(),
                                    showDeleted: false,
                                    singleEvents: true,
                                    maxResults: 10,
                                    orderBy: "startTime",
                                })
                                .then(function (response) {
                                    var events = response.result.items;
                                    appendPre("Upcoming events:");

                                    if (events.length > 0) {

                                        for (i = 0; i < events.length; i++) {
                                            var event = events[i];
                                            var when = event.start.dateTime;
                                            if (!when) {
                                                when = event.start.date;
                                            }
                                            appendPre(event.summary + " (" + when + ")");
                                        }
                                    } else {
                                        appendPre("No upcoming events found.");
                                    }
                                });


                        }
                    </script>

                    <script async defer src="https://apis.google.com/js/api.js"
                        onload="this.onload=function(){};handleClientLoad()"
                        onreadystatechange="if (this.readyState === 'complete') this.onload()"></script>

                    </html>
                    <iframe
                        src="https://calendar.google.com/calendar/embed?height=600&amp;wkst=1&amp;bgcolor=%237dd6ff&amp;ctz=America%2FToronto&amp;src=Y19saDZzNHVnYXRtcDhxN2VvcDNuOTRyaG5za0Bncm91cC5jYWxlbmRhci5nb29nbGUuY29t&amp;color=%234285F4&amp;mode=AGENDA"
                        style="border: solid 1px #777" width="800" height="600" frameborder="0" scrolling="no"></iframe>
                </div>
            </section>

            <!-- Statistics Section -->
            <section class="about section" id="statistics">
                <div class="container">
                    <div class="logoCon">
                        <img src="assets/img/logo.png" width="100" height="100" alt="logo" />
                    </div>
                        <div class="row">
                            <div class="section-title padd-15">
                                <h2>Statistics <i class="fa fa-signal"></i></h2>
                            </div>
                            <div class="about-content padd-15">
                                <div class="row">
                                    <div class="personal-skills padd-15">
                                        <div class="column">
                                            <div class="skill-item padd-15">
                                                <h5><i class="fa fa-heart"></i> Health</h5>
                                                <div class="progress">
                                                    <div class="progress-bar" style="width: 85%;">85%</div>
                                                </div>
                                            </div>
                                            <div class="skill-item padd-15">
                                                <h5><i class="fa fa-apple"></i> Nutrition</h5>
                                                <div class="progress">
                                                    <div class="progress-bar" style="width: 90%;">90%</div>
                                                </div>
                                            </div>
                                            <div class="skill-item padd-15">
                                                <h5><i class="fa fa-male"></i> Exercise</h5>
                                                <div class="progress">
                                                    <div class="progress-bar" style="width: 60%;">60%</div>
                                                </div>
                                            </div>
                                            <div class="skill-item padd-15">
                                                <h5><i class="fa fa-bed"></i> Sleep</h5>
                                                <div class="progress">
                                                    <div class="progress-bar" style="width: 70%;">70%</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="personal-info padd-15">
                                        <div class="row">
                                            <div class="info-item padd-15">
                                                <p>Average Sleep Per Night: <span>TODO: Display value here</span></p>
                                            </div>
                                            <div class="info-item padd-15">
                                                <p>Average Sleep Consistantcy: <span>TODO: Display value here</span></p>
                                            </div>
                                            <div class="info-item padd-15">
                                                <p>You have improved your: <span>TODO: sleep, nutrition etc</span></p>
                                            </div>
                                            <div class="info-item padd-15">
                                                <p>You have room to improve: <span>TODO: sleep, nutrition etc</span></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>



                            </div>
                        </div>
            </section>

            <!-- Preferences Section -->
            <section class="preferences section" id="preferences">
                <div class="container">
                    <div class="logoCon">
                        <img src="assets/img/logo.png" width="100" height="100" alt="logo" />
                    </div>
                    <div class="row">
                        <div class="section-title padd-15">
                            <h2>Preferences <i class="fa fa-user"></i></h2>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <script src="assets/js/main.js"></script>
</body>

</html>